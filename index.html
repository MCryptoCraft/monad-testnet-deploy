<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monad Smart Contract Deployer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@web3modal/html@3.5.7"></script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center h-screen">
  <div class="bg-gray-800 p-8 rounded-2xl shadow-xl max-w-md w-full text-center">
    <h1 class="text-2xl font-bold mb-4">Monad Testnet Deployer</h1>
    <p class="mb-6 text-gray-400">Connect your wallet and deploy a contract on Monad Testnet.</p>

    <!-- Connect Wallet -->
    <button id="connectBtn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-xl mb-4 font-semibold">
      🔗 Connect Wallet
    </button>

    <!-- Deploy Button -->
    <button id="deployBtn" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-xl font-semibold hidden">
      🚀 Deploy Smart Contract
    </button>

    <!-- Result -->
    <div id="result" class="mt-6 text-sm"></div>
  </div>

  <script>
    // ------- CONFIG -------
    const MONAD_CHAIN = {
      chainId: "0x1F91", // 8081 in hex (example for Monad testnet, adjust if needed)
      chainName: "Monad Testnet",
      rpcUrls: ["https://testnet-rpc.monad.xyz"], // Replace with correct RPC
      nativeCurrency: { name: "Monad", symbol: "MON", decimals: 18 },
      blockExplorerUrls: ["https://testnet.monadscan.io/"]
    };

    // Example bytecode for a simple contract (replace with your own)
    const CONTRACT_BYTECODE = "0x6080604052348015600f57600080fd5b5060...0033"; 

    let provider, signer;

    // Setup Web3Modal
    const web3modal = new window.Web3Modal.Web3Modal({
      projectId: "YOUR_PROJECT_ID", // get from https://cloud.walletconnect.com
      walletConnectVersion: 2,
      chains: [MONAD_CHAIN],
      themeMode: "dark"
    });

    const connectBtn = document.getElementById("connectBtn");
    const deployBtn = document.getElementById("deployBtn");
    const result = document.getElementById("result");

    // Connect wallet
    connectBtn.onclick = async () => {
      try {
        const session = await web3modal.connect();
        provider = new ethers.providers.Web3Provider(session);
        signer = provider.getSigner();

        connectBtn.innerText = "✅ Wallet Connected";
        connectBtn.disabled = true;
        deployBtn.classList.remove("hidden");
      } catch (err) {
        console.error(err);
        result.innerHTML = `<p class="text-red-500">❌ Connection failed</p>`;
      }
    };

    // Deploy smart contract
    deployBtn.onclick = async () => {
      try {
        result.innerHTML = `<p class="text-yellow-400">⏳ Deploying contract...</p>`;
        const tx = await signer.sendTransaction({ data: CONTRACT_BYTECODE });
        await tx.wait();

        result.innerHTML = `
          <p class="text-green-400">🎉 Contract Deployed!</p>
          <a href="${MONAD_CHAIN.blockExplorerUrls[0]}/address/${tx.contractAddress}" 
             class="text-blue-400 underline" target="_blank">
             ${tx.contractAddress}
          </a>
        `;
      } catch (err) {
        console.error(err);
        result.innerHTML = `<p class="text-red-500">❌ Deployment failed</p>`;
      }
    };
  </script>
</body>
</html>
